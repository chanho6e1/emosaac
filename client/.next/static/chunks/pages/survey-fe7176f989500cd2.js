(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{458:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/survey",function(){return e(4442)}])},5394:function(t,n,e){"use strict";e.d(n,{E:function(){return i}});var r=e(6154);function o(){{let t=localStorage.getItem("access_token");return"Bearer ".concat(t)}}let i=function(){let t=o(),n=r.Z.create({baseURL:"http://j8d203.p.ssafy.io:8081/api",headers:{"Content-Type":"application/JSON;charset=utf-8",Authorization:t}});return n}();!function(){let t=o();r.Z.create({baseURL:"http://j8d203.p.ssafy.io:8081/api",headers:{"Content-Type":"multipart/form-data",Authorization:t}})}()},6511:function(t,n,e){"use strict";var r=e(5394);async function o(){try{let{data:t,status:n}=await r.E.get("/users/me");if(200===n)return t.data}catch(t){throw t}return null}n.Z=o},4442:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return X}});var r=e(5893),o=e(7297),i=e(4288),c=e(917),u=e(7294);function l(){let t=(0,o.Z)(["\n  cursor: pointer;\n  width: 100%;\n  height: 35px;\n  border: none;\n  border-radius: 5px;\n  font-size: 18px;\n  padding: 0 20px;\n  background-color: var(--main-color);\n  color: var(--text-color);\n"]);return l=function(){return t},t}function a(t){let{text:n,onClick:e}=t;return(0,i.tZ)(i.HY,{children:(0,i.tZ)("button",{css:s,onClick:e,children:n})})}let s=(0,c.iv)(l());var d=e(5394);async function f(t){try{let{data:n}=await d.E.get("/genres/research?typeCode=".concat(t));if(200===n.status)return n.data;return null}catch(t){throw t}}function h(){let t=(0,o.Z)(["\n  cursor: pointer;\n  box-sizing: border-box;\n"]);return h=function(){return t},t}function p(){let t=(0,o.Z)(["\n  /* opacity: 0.5; */\n  border: 5px solid var(--main-color);\n"]);return p=function(){return t},t}let g=t=>{let{src:n,alt:e,isSelected:r,onClick:o}=t;return(0,i.tZ)("img",{src:n,alt:e,css:[v,r?Z:void 0],onClick:o})},v=(0,c.iv)(h()),Z=(0,c.iv)(p());async function y(t){let{webtoonIds:n,novelIds:e}=t;try{let{data:t}=await d.E.post("/genres/research",{webtoonId:n,novelId:e});console.log(t)}catch(t){console.log(t)}}var x=e(1163);function m(){let t=(0,o.Z)(["\n  margin-top: 50px;\n  display: flex;\n  justify-content: space-around;\n  align-items: flex-start; /* 이미지와 맞추기 위해 추가 */\n"]);return m=function(){return t},t}function w(){let t=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  margin: 30px 105px;\n  grid-gap: 10px;\n  justify-content: center;\n  & > div {\n    width: 100%;\n    height: 100%;\n  }\n  & > div > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return w=function(){return t},t}function b(){let t=(0,o.Z)(["\n  display: flex;\n"]);return b=function(){return t},t}function k(){let t=(0,o.Z)(["\n  margin-left: 20px;\n"]);return k=function(){return t},t}let E=()=>{let t=(0,x.useRouter)(),[n,e]=(0,u.useState)(0),[r,o]=(0,u.useState)([]),[c,l]=(0,u.useState)(new Set),[s,d]=(0,u.useState)(new Set),h=()=>{e(1),console.log("선택됨")},p=()=>{e(0)},v=()=>{console.log(Array.from(c),Array.from(s)),y({webtoonIds:Array.from(c),novelIds:Array.from(s)}).catch(t=>{console.log(t)}),alert("제출되었습니다!"),t.push("/")};(0,u.useEffect)(()=>{f(n).then(t=>{null!==t&&o(t)})},[n]);let Z=(t,n)=>{("webtoon"===n?l:d)(n=>{let e=new Set(n);if(e.has(t))e.delete(t);else{if(e.size>=5)return alert("5개만 선택해주세요!"),n;e.add(t)}return e})};return(0,i.BX)(i.HY,{children:[(0,i.BX)("section",{css:_,children:[(0,i.BX)("div",{children:[0===n&&(0,i.tZ)("h1",{children:"선호하는 웹툰을 5개 선택해주세요"}),1===n&&(0,i.tZ)("h1",{children:"선호하는 웹소설을 5개 선택해주세요"}),(0,i.tZ)("div",{style:{marginTop:"10px"},children:"이모작의 추천방식에 깜짝 놀라실걸요?"})]}),(0,i.tZ)("div",{children:(0,i.tZ)("div",{children:0===n?(0,i.tZ)(a,{text:"다음",onClick:h}):(0,i.BX)("div",{css:S,children:[(0,i.tZ)("div",{children:(0,i.tZ)(a,{text:"이전",onClick:p})}),(0,i.tZ)("div",{css:j,children:(0,i.tZ)(a,{text:"제출",onClick:v})})]})})})]}),(0,i.tZ)("section",{css:C,children:r.map(t=>(0,i.tZ)("div",{children:(0,i.tZ)(g,{src:t.thumbnail,alt:"설문조사용 웹툰/웹소설 썸네일",isSelected:(0===n?c:s).has(t.bookId),onClick:()=>Z(t.bookId,0===n?"webtoon":"novel")})},t.bookId))})]})},_=(0,c.iv)(m()),C=(0,c.iv)(w()),S=(0,c.iv)(b()),j=(0,c.iv)(k());async function I(t){try{let{data:n}=await d.E.get("/genres?typeCode=".concat(t));if(200===n.status)return n.data;return null}catch(t){return console.log(t),null}}var A=e(6511);function N(){return(0,u.useEffect)(()=>{I(0).then(t=>{console.log(t)})},[]),(0,u.useEffect)(()=>{(0,A.Z)().then(t=>{console.log(t)})},[]),(0,r.jsx)(r.Fragment,{})}function X(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E,{}),(0,r.jsx)(N,{})]})}}},function(t){t.O(0,[154,774,888,179],function(){return t(t.s=458)}),_N_E=t.O()}]);